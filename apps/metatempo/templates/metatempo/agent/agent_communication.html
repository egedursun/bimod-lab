
<!--
  ~ Copyright (c) 2024 BMDâ„¢ Autonomous Holdings. All rights reserved.
  ~
  ~ Project: Bimod.ioâ„¢
  ~ File: agent_communication.html
  ~ Last Modified: 2024-10-28 20:46:07
  ~ Author: Ege Dogan Dursun (Co-Founder & Chief Executive Officer / CEO @ BMDâ„¢ Autonomous Holdings)
  ~ Created: 2024-10-28 20:46:08
  ~
  ~ This software is proprietary and confidential. Unauthorized copying,
  ~ distribution, modification, or use of this software, whether for
  ~ commercial, academic, or any other purpose, is strictly prohibited
  ~ without the prior express written permission of BMDâ„¢ Autonomous
  ~ Holdings.
  ~
  ~  For permission inquiries, please contact: admin@Bimod.io.
  ~
  -->

{% extends layout_path %}
{% load static %}
{% load i18n %}

{% block title %}MetaTempoâ„¢ AI Communication{% endblock %}

{% block vendor_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'vendor/libs/sweetalert2/sweetalert2.css' %}"/>
{% endblock vendor_css %}

{% block vendor_js %}
  {{ block.super }}
  <script src="{% static 'vendor/libs/sweetalert2/sweetalert2.js' %}"></script>
{% endblock vendor_js %}

{% block content %}

<a href="{% url 'metatempo:connection_list' %}">
  <button class="btn btn-secondary mt-4 mb-4">
    <i class="fa fa-dashboard me-4"></i>
    <strong> Back to MetaTempoâ„¢ Connections</strong>
  </button>
</a>

<div class="tips-section alert alert-secondary alert-dismissible d-flex col-lg-12 align-items-center mt-4" role="alert">
    <img src="{% static 'img/custom-illustrations-v2/i2-25.png' %}" width="25%" class="justify-content-end me-8"
         style="border-radius: 25px;" alt="Illustration for tip">
    <span class="alert-icon rounded"><i class="ti ti-bookmark"></i></span>
    <div class="d-flex flex-column ps-1">
      <h5 class="alert-heading mb-2">Tip</h5>
      <p class="mb-0">
        Select a MetaTempoâ„¢ connection and provide a query for the AI. This AI assistant will analyze the data
        within the selected MetaTempo connection, helping you understand tempo insights for your team and projects.
      </p>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  </div>

<hr>

{% if messages %}
  {% for message in messages %}
    <div class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% else %}alert-info{% endif %}" role="alert">
      {{ message }}
    </div>
  {% endfor %}
{% endif %}

<hr>

<div class="card mt-4">
  <div class="card-header">
    <h5><i class="fa fa-comments me-2"></i>
      <strong>Interact with MetaTempoâ„¢ AI</strong>
    </h5>
  </div>
  <div class="card-body">
    <img src="{% static 'img/metatempo/mtmp-5.png' %}" class="rounded mb-8 mt-0" style="width: 100%;" alt="Illustration for MetaTempo AI">
    <form method="post" action="{% url 'metatempo:agent_communication' %}">
      {% csrf_token %}
      <div class="mb-3">
        <label for="connection_id" class="form-label"><strong>MetaTempoâ„¢ Connection</strong></label>
        <select id="connection_id" name="connection_id" class="form-select" required>
          {% for connection in metatempo_connections %}
            <option value="{{ connection.id }}">MetaTempoâ„¢ Manager for {{ connection.board.title }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="mb-3">
        <label for="user_query" class="form-label"><strong>Query</strong></label>
        <textarea id="user_query" name="user_query" class="form-control" rows="3" placeholder="Provide instructions or paste meeting details for the AI to process within the selected MetaTempo connection." required></textarea>
      </div>
      <button type="submit" class="btn btn-primary mt-4"><i class="fa fa-paper-plane me-2"></i>
        <strong>Submit Query</strong>
      </button>
    </form>
  </div>
</div>

<hr>

{% if llm_output %}
  <div class="card border border-success border-2 mt-4">
    <div class="card-body">
      <h5 class="card-title mb-2">
        <i class="fa fa-lightbulb text-success me-2"></i>
        <strong>AI Response</strong>
      </h5>
      <hr>
      <p class="text-muted mt-4">
        <strong class="text-white">ðŸŸ¡ &nbsp; The AI has analyzed your query and returned the following insights.</strong>
      </p>
      <hr>
      <div class="btn-primary p-3 rounded">
        <p class="text-white"><strong>{{ llm_output|safe|linebreaksbr }}</strong></p>
      </div>
    </div>
  </div>
{% endif %}

{% endblock content %}

{% block page_js %}
  {{ block.super }}
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Custom JS can be added here as needed.
    });
  </script>
{% endblock page_js %}
