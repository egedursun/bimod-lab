{% extends layout_path %}

{% load static %}
{% load i18n %}
{% load field_to_label %}

{% block title %}Add New User{% endblock %}

{% block vendor_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'vendor/libs/select2/select2.css' %}" />
{% endblock vendor_css %}

{% block vendor_js %}
{{ block.super }}
<script src="{% static 'vendor/libs/select2/select2.js' %}"></script>
{% endblock vendor_js %}

{% block page_js %}
{{ block.super }}
<script src="{% static 'js/form-layouts.js' %}"></script>
{% endblock page_js %}

{% block content %}
<!-- Basic Layout -->
<div class="row">
  <div class="col-xl mb-6">
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">Add New User</h5> <small class="text-muted float-end"></small>
      </div>
      <div class="card-body">
        <div class="alert alert-secondary alert-dismissible d-flex col-lg-8" role="alert">
              <span class="alert-icon rounded">
                <i class="ti ti-bookmark"></i>
              </span>
        <div class="d-flex flex-column ps-1">
          <h5 class="alert-heading mb-2">Tip</h5>
          <p class="mb-0">
            In this page, you can add a new user to the system. You can assign the user to an organization, set their
            username, email, and password, and provide additional information such as first name, last name, phone number,
            address, city, country, and postal code. You can also set the user as active or inactive. If you would like
            to associate a user with additional organizations, don't worry. You can do that after adding the user
            to the system for the first time.
          </p>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
          </button>
        </div>
      </div>
        {% if error_messages %}
          {% for key, message in error_messages.items %}
            <div class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% else %}alert-danger{% endif %}" role="alert">
              <strong>{{ key | field_name_to_label }}:</strong> {{ message }}
            </div>
          {% endfor %}
        {% endif %}
        <form method="post" enctype="multipart/form-data">
          {% csrf_token %}
          <div class="mb-6">
            <label class="form-label" for="organization">Organization</label>
            <select class="form-select" id="organization" name="organization">
              {% for organization in organizations %}
              <option value="{{ organization.id }}">{{ organization.name }}</option>
              {% endfor %}
            </select>
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="username">Username</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Enter the username" required/>
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="email">Email</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="Enter the email" required/>
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="password">Set a Temporary Password for the User</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Enter the password" required/>
            <div class="form-text"></div>
          </div>
          <div class="alert alert-solid-info d-flex align-items-center mt-6" role="alert">
            <span class="alert-icon rounded">
              <i class="ti ti-info-circle"></i>
            </span>
            Don't worry, the user will still be able to set their own password after logging in.
          </div>
          <div class="mb-6">
            <label class="form-label" for="password">Confirm Password</label>
            <input type="password" class="form-control" id="confirm_password" name="confirm_password" placeholder="Enter the password again" required/>
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="first_name">First Name</label>
            <input type="text" class="form-control" id="first_name" name="first_name" placeholder="Enter the first name" />
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="last_name">Last Name</label>
            <input type="text" class="form-control" id="last_name" name="last_name" placeholder="Enter the last name" />
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="phone_number">Phone Number</label>
            <input type="text" class="form-control" id="phone_number" name="phone_number" placeholder="Enter the phone number" />
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="address">Address</label>
            <input type="text" class="form-control" id="address" name="address" placeholder="Enter the address" />
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="city">City</label>
            <input type="text" class="form-control" id="city" name="city" placeholder="Enter the city" />
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="country">Country</label>
            <input type="text" class="form-control" id="country" name="country" placeholder="Enter the country" />
            <div class="form-text"></div>
          </div>
          <div class="mb-6">
            <label class="form-label" for="postal_code">Postal Code</label>
            <input type="text" class="form-control" id="postal_code" name="postal_code" placeholder="Enter the postal code" />
            <div class="form-text"></div>
          </div>
          <div class="mb-6 form-check">
            <input class="form-check-input" type="checkbox" id="is_active" name="is_active" checked>
            <label class="form-check-label" for="is_active">Set user as active</label>
          </div>
          <button type="submit" class="btn btn-primary d-grid w-100">Add User</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
