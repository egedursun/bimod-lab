<!--
~ Copyright (c) 2024 BMD™ Autonomous Holdings. All rights reserved.
~
~ Project: Bimod.io™
~ File: create_codebase_storage.html
~ Last Modified: 2024-10-05 01:39:47
~ Author: Ege Dogan Dursun (Co-Founder & Chief Executive Officer / CEO @ BMD™ Autonomous Holdings)
~ Created: 2024-10-05 14:42:46
~
~ This software is proprietary and confidential. Unauthorized copying,
~ distribution, modification, or use of this software, whether for
~ commercial, academic, or any other purpose, is strictly prohibited
~ without the prior express written permission of BMD™ Autonomous
~ Holdings.
~
~  For permission inquiries, please contact: admin@Bimod.io.
~
-->

{% extends layout_path %}

{% load static %}
{% load i18n %}
{% load field_to_label %}

{% block title %}Create Code Base Storage Connection{% endblock %}

{% block vendor_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'vendor/libs/flatpickr/flatpickr.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/select2/select2.css' %}" />
{% endblock vendor_css %}

{% block vendor_js %}
  {{ block.super }}
  <script src="{% static 'vendor/libs/cleavejs/cleave.js' %}"></script>
  <script src="{% static 'vendor/libs/cleavejs/cleave-phone.js' %}"></script>
  <script src="{% static 'vendor/libs/moment/moment.js' %}"></script>
  <script src="{% static 'vendor/libs/flatpickr/flatpickr.js' %}"></script>
  <script src="{% static 'vendor/libs/select2/select2.js' %}"></script>
{% endblock vendor_js %}

{% block page_js %}
  {{ block.super }}
  <script src="{% static 'js/form-layouts.js' %}"></script>
{% endblock page_js %}

{% block content %}
  <!-- Basic Layout -->
  <div class="row">
    <div class="col-xl mb-6">
      <div class="card">
        <div class="card-datatable table-responsive">
          <a href="{% url 'datasource_codebase:list' %}">
            <button class="btn btn-secondary ms-4 mt-4 mb-8">
              <i class="fa fa-dashboard me-4"></i>
              <strong> Manage Code Base Storage Connections</strong>
            </button>
          </a>
        </div>
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">
            <strong>Create Code Base Storage</strong>
          </h5>
          <small class="text-muted float-end"></small>
        </div>
        <div class="card-body">
          <div class="tips-section alert alert-secondary alert-dismissible d-flex col-lg-12 align-items-center"
               role="alert">
            <img src="{% static 'img/custom-illustrations-v2/i2-75.png' %}" width="25%" style="border-radius: 25px;"
                 class="justify-content-end me-8" alt="Illustration for tip">
            <span class="alert-icon rounded">
            <i class="ti ti-bookmark"></i>
          </span>
            <div class="d-flex flex-column ps-1">
              <h5 class="alert-heading mb-2">Tip</h5>
              <p class="mb-0">
                Create a new code base storage by providing the necessary information. This will allow your assistant to
                access and query the code documents stored in the code base storage and utilize them to provide better
                insights and
                recommendations.
              </p>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
              </button>
            </div>
          </div>
          {% if messages %}
            {% for message in messages %}
              <div
                class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% else %}alert-danger{% endif %}"
                role="alert">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}

          <hr>

          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <img src="{% static 'img/codebases/cbs-1.jpg' %}" class="rounded" style="width: 100%;"
                 alt="Illustration for tips">
            <div class="row p-8">
              <h5 class="bg-body p-8 my-8 rounded border border-primary-subtle rounded">
                <strong>
                  <i class="fa fa-info-circle me-4"></i>
                  Essential Information
                </strong>
              </h5>
              <div class="mb-6 col-6">
                <label class="form-label" for="assistant">Assistant<span class="text-danger">&nbsp;*</span></label>
                <select class="form-select" id="assistant" name="assistant">
                  {% for assistant in assistants %}
                    <option value="{{ assistant.id }}">{{ assistant.name }}</option>
                  {% endfor %}
                </select>
                <div class="form-text"></div>
              </div>
              <div class="mb-6 col-6">
                <label class="form-label" for="name">Name<span class="text-danger">&nbsp;*</span></label>
                <input type="text" class="form-control" id="name" name="name" placeholder="Enter code base name" />
              </div>
              <div class="mb-6 col-6">
                <label class="form-label" for="description">Description<span class="text-danger">&nbsp;*</span></label>
                <textarea class="form-control" id="description" name="description" rows="1"
                          placeholder="Enter code base description"></textarea>
              </div>
              <div class="mb-6 col-6">
                <label class="form-label" for="vectorizer">Vectorizer<span class="text-danger">&nbsp;*</span></label>
                <select class="form-select" id="vectorizer" name="vectorizer">
                  <option value="" disabled selected>Select Vectorizer</option>
                  {% for key, value in vectorizers %}
                    <option value="{{ key }}" {% if forloop.first %}selected{% endif %}>{{ value }}</option>
                  {% endfor %}
                </select>
              </div>
              <h5 class="bg-body p-8 my-8 rounded border border-primary-subtle rounded">
                <strong>
                  <i class="fa fa-cogs me-4"></i>
                  Advanced Configurations
                </strong>
              </h5>
              <div class="mb-6 col-4">
                <label class="form-label" for="embedding_chunk_size">Embedding Chunk Size</label>
                <!-- slider bar here -->
                <input type="range" class="form-range" id="embedding_chunk_size" name="embedding_chunk_size" min="500"
                       max="4000" step=100" value="1000" oninput="this.nextElementSibling.value = this.value">
                <output>1000</output>
              </div>
              <div class="mb-6 col-4">
                <label class="form-label" for="embedding_chunk_overlap">Embedding Chunk Overlap</label>
                <!-- slider bar here -->
                <input type="range" class="form-range" id="embedding_chunk_overlap" name="embedding_chunk_overlap"
                       min="0"
                       max="400" step=10" value="250" oninput="this.nextElementSibling.value = this.value">
                <output>250</output>
              </div>
              <div class="mb-6 col-4">
                <label class="form-label" for="search_instance_retrieval_limit">Retrieval Limit</label>
                <!-- slider bar here -->
                <input type="range" class="form-range" id="search_instance_retrieval_limit"
                       name="search_instance_retrieval_limit" min="1" max="30" step=1" value="10"
                       oninput="this.nextElementSibling.value = this.value">
                <output>10</output>
              </div>
            </div>
            <hr>
            <input type="hidden" name="created_by_user" value="{{ user.id }}">
            <button type="submit" class="btn btn-primary d-grid w-25">
              <strong>
                <i class="fa fa-plus me-4"></i>
                Create Code Base</strong>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
