  <!--
  ~ Copyright (c) 2024 BMD® Autonomous Holdings. All rights reserved.
  ~
  ~ Project: Bimod.io
  ~ File: update_message_template.html
  ~ Last Modified: 2024-09-25 17:51:06
  ~ Author: Ege Dogan Dursun (Co-Founder & Chief Executive Officer / CEO @ BMD® Autonomous Holdings)
  ~ Created: 2024-10-01 23:33:19
  ~
  ~ This software is proprietary and confidential. Unauthorized copying,
  ~ distribution, modification, or use of this software, whether for
  ~ commercial, academic, or any other purpose, is strictly prohibited
  ~ without the prior express written permission of BMD® Autonomous
  ~ Holdings.
  ~
  ~  For permission inquiries, please contact: admin@bimod.io.
  ~
  -->

{% extends layout_path %}

{% load static %}
{% load i18n %}
{% load field_to_label %}

{% block title %}Update Message Template{% endblock %}

{% block vendor_css %}
  {{ block.super }}
<link rel="stylesheet" href="{% static 'vendor/libs/flatpickr/flatpickr.css' %}"/>
  <link rel="stylesheet" href="{% static 'vendor/libs/select2/select2.css' %}"/>
{% endblock vendor_css %}

{% block vendor_js %}
  {{ block.super }}
  <script src="{% static 'vendor/libs/cleavejs/cleave.js' %}"></script>
  <script src="{% static 'vendor/libs/cleavejs/cleave-phone.js' %}"></script>
  <script src="{% static 'vendor/libs/moment/moment.js' %}"></script>
  <script src="{% static 'vendor/libs/flatpickr/flatpickr.js' %}"></script>
  <script src="{% static 'vendor/libs/select2/select2.js' %}"></script>
{% endblock vendor_js %}

{% block page_js %}
  {{ block.super }}
  <script src="{% static 'js/form-layouts.js' %}"></script>
{% endblock page_js %}

{% block content %}

  <a href="{% url 'message_templates:list' %}">
    <button class="btn btn-secondary my-4 w-25">
      <i class="fa fa-chevron-left me-4"></i>
      <strong> Back to Templates</strong>
    </button>
  </a>

  <!-- Basic Layout -->
  <div class="row">
    <div class="col-xl mb-6">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">
            <strong>Update Message Template</strong>
          </h5> <small class="text-muted float-end"></small>
        </div>
        <div class="card-body">
          <div class="tips-section alert alert-secondary alert-dismissible d-flex col-lg-12 align-items-center" role="alert">
            <img src="{% static 'img/custom-illustrations-v2/i2-76.png' %}" width="25%" style="border-radius: 25px;"
                 class="justify-content-end me-8" alt="Illustration for tip">
            <span class="alert-icon rounded">
              <i class="ti ti-bookmark"></i>
            </span>
            <div class="d-flex flex-column ps-1">
              <h5 class="alert-heading mb-2">Tip</h5>
              <p class="mb-0">
                In this page, you can update an existing Message Template. Fill in the form with the
                template's information and click on the "Update Information" button to save the changes.
                Make sure that you have filled in all the required fields.
              </p>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          </div>
          {% if error_messages %}
            {% for key, message in error_messages.items %}
              <div
                class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% else %}alert-danger{% endif %}"
                role="alert">
                <strong>{{ key }}:</strong> {{ message }}
              </div>
            {% endfor %}
          {% endif %}
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row p-8">
              <div class="mb-6 col-12">
                <label class="form-label" for="organization">Organization</label>
                <select class="form-control" id="organization" name="organization">
                  {% for organization in organizations %}
                    <option value="{{ organization.id }}"
                            {% if message_template.organization == organization %}selected{% endif %}>{{ organization.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="mb-6 col-12">
                <label class="form-label" for="template_text">Template Text</label>
                <textarea class="form-control" id="template_text" name="template_text" rows="3"
                          placeholder="Enter template text">{{ message_template.template_text }}</textarea>
                <div class="form-text"></div>
              </div>
            </div>
            <hr>
            <button type="submit" class="btn btn-primary d-grid mt-4 w-25">
              <strong>Update Template</strong>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
