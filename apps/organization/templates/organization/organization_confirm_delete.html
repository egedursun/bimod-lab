{% extends layout_path %}
{% load static %}
{% load i18n %}

{% block title %}Delete Organization{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-xl mb-6">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h3 class="mb-0"><strong>Delete Organization</strong></h3>
          <small class="text-muted float-end"></small>
        </div>
        <div class="card-body">
          {% if user_organizations_count > 1 %}
            <form method="post">
              {% csrf_token %}
              <p>Are you sure you want to delete the organization <strong>"{{ organization.name }}"</strong>?</p><br>
              <h6><strong>
                • Please make sure that this operation will result in the complete removal of the organization from the
                system.
                <br>
                • This deletion operation is completely irreversible and will entirely remove the organization and all
                associated data from the system.
              </strong></h6>
              <p>Please select another organization to transfer your existing balance to:</p>
              <select name="transfer_organization_id" class="form-select" required>
                {% for org in user_organizations %}
                  {% if org.id != organization.id %}
                    <option value="{{ org.id }}">{{ org.name }}</option>
                  {% endif %}
                {% endfor %}
              </select>
              <br>
              <img src="{% static 'img/custom-illustrations-v2/i2-4.png' %}" width="25%" style="border-radius:25px;"
                   class="justify-content-end me-8 mb-8" alt="Custom illustration for confirming deletion">
              <hr>
              <button type="submit" class="btn btn-danger mt-8"><strong>DELETE &nbsp;</strong> the organization.</button>
              <br><br>
              <a href="{% url 'organization:list' %}" class="btn btn-secondary"><strong>CANCEL &nbsp;</strong> the
                deletion operation.</a>
            </form>
          {% else %}
            <div class="alert alert-danger alert-dismissible d-flex col-lg-12 align-items-center" role="alert">
              <img src="{% static 'img/custom-illustrations-v2/i2-5.png' %}" width="25%" style="border-radius:25px;"
                   class="justify-content-end me-8" alt="Custom illustration for confirming deletion">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <span class="alert-icon rounded">
              <i class="ti ti-alert-triangle-filled"></i>
            </span>
              <div class="d-flex flex-column ps-1">
                <h5 class="alert-heading mb-2"><strong>Action Forbidden</strong></h5>
                <p class="mb-0">
                  Oops! You cannot delete the organization <strong>"{{ organization.name }}"</strong> because it is the
                  only active organization you currently have. This behavior is to save your credits from being lost.
                  If you truly want to delete this organization, please create another organization first. Then, you
                  can delete this one, by choosing to transfer the balance to your new organization.
                </p>
                <hr>
                <button type="button" class="btn-close mt-8" data-bs-dismiss="alert" aria-label="Close">
                </button>
              </div>
            </div>
            <a href="{% url 'organization:list' %}" class="btn btn-secondary"><strong>Turn Back</strong></a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
