<!--
  ~ Copyright (c) 2024 BMD™ Autonomous Holdings. All rights reserved.
  ~
  ~ Project: Bimod.io™
  ~ File: create_website_storage_connection.html
  ~ Last Modified: 2024-12-07 19:37:49
  ~ Author: Ege Dogan Dursun (Co-Founder & Chief Executive Officer / CEO @ BMD™ Autonomous Holdings)
  ~ Created: 2024-12-07 19:37:50
  ~
  ~ This software is proprietary and confidential. Unauthorized copying,
  ~ distribution, modification, or use of this software, whether for
  ~ commercial, academic, or any other purpose, is strictly prohibited
  ~ without the prior express written permission of BMD™ Autonomous
  ~ Holdings.
  ~
  ~  For permission inquiries, please contact: admin@Bimod.io.
  ~
  -->

{% extends layout_path %}

{% load static %}
{% load i18n %}
{% load field_to_label %}

{% block title %}Create Website Storage Connection{% endblock %}

{% block vendor_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'vendor/libs/flatpickr/flatpickr.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/select2/select2.css' %}" />
{% endblock vendor_css %}

{% block vendor_js %}
  {{ block.super }}
  <script src="{% static 'vendor/libs/cleavejs/cleave.js' %}"></script>
  <script src="{% static 'vendor/libs/cleavejs/cleave-phone.js' %}"></script>
  <script src="{% static 'vendor/libs/moment/moment.js' %}"></script>
  <script src="{% static 'vendor/libs/flatpickr/flatpickr.js' %}"></script>
  <script src="{% static 'vendor/libs/select2/select2.js' %}"></script>
{% endblock vendor_js %}

{% block page_js %}
  {{ block.super }}
  <script src="{% static 'js/form-layouts.js' %}"></script>
{% endblock page_js %}

{% block content %}
  <!-- Basic Layout -->
  <div class="row">
    <div class="col-xl mb-6">
      <div class="card">
        <div class="card-datatable table-responsive">
          <a href="{% url 'datasource_website:storage_list' %}">
            <button class="btn btn-secondary ms-4 mt-4 mb-8">
              <strong>
                <i class="fa fa-arrow-left me-2"></i>
                Back to Storage List
              </strong>
            </button>
          </a>
        </div>
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">
            <strong>Create New Website Storage Connection</strong>
          </h5>
        </div>
        <div class="card-body">

          <div class="tips-section alert alert-secondary alert-dismissible d-flex col-lg-12 align-items-center"
               role="alert">
            <img src="{% static 'img/custom-illustrations-v2/i2-26.png' %}" width="25%" style="border-radius: 25px;"
                 class="justify-content-end me-8" alt="Illustration for tips">
            <span class="alert-icon rounded">
            <i class="ti ti-bookmark"></i>
          </span>
            <div class="d-flex flex-column ps-1">
              <h5 class="alert-heading mb-2">Tip</h5>
              <p class="mb-0">
                You can create a new website storage connection by filling the form below. Make sure to select the
                correct assistant, name, description, vectorizer model, and other parameters. Once you fill the form,
                click the "Create Connection" button to create the connection.
              </p>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
              </button>
            </div>
          </div>

          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }} mb-4" role="alert">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}

          <hr>

          <form method="post" enctype="multipart/form-data" class="mt-4">
            {% csrf_token %}
            <div class="row">
              <h5 class="bg-body p-8 my-8 rounded border border-primary-subtle rounded">
                <strong>
                  <i class="fa fa-info-circle me-4"></i>
                  Essential Information
                </strong>
              </h5>
              <div class="mb-6 col-6">
                <label class="form-label" for="assistant_id">Assistant<span class="text-danger">&nbsp;*</span></label>
                <select class="form-select" id="assistant_id" name="assistant_id">
                  {% for assistant in assistants %}
                    <option value="{{ assistant.id }}">{{ assistant.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="mb-6 col-6">
                <label class="form-label" for="name">Name<span class="text-danger">&nbsp;*</span></label>
                <input type="text" class="form-control" id="name" name="name" placeholder="Enter connection name" />
              </div>
              <div class="mb-6 col-6">
                <label class="form-label" for="description">Description<span class="text-danger">&nbsp;*</span></label>
                <textarea class="form-control" id="description" name="description" rows="1"
                          placeholder="Describe the connection"></textarea>
              </div>
              <div class="mb-6 col-6">
                <label class="form-label" for="vectorizer">Vectorizer Model<span class="text-danger">&nbsp;*</span></label>
                <select class="form-select" id="vectorizer" name="vectorizer">
                  {% for label, name in vectorizers %}
                    <option value="{{ label }}" {% if forloop.first %}selected{% endif %}>{{ name }}</option>
                  {% endfor %}
                </select>
              </div>
              <h5 class="bg-body p-8 my-8 rounded border border-primary-subtle rounded">
                <strong>
                  <i class="fa fa-cogs me-4"></i>
                  Advanced Configurations
                </strong>
              </h5>
              <div class="mb-6 col-3">
                <label class="form-label" for="embedding_chunk_size">Embedding Chunk Size</label>
                <input type="number" class="form-control" id="embedding_chunk_size" value="1000" min="200" max="8000"
                       name="embedding_chunk_size" placeholder="Enter size">
              </div>
              <div class="mb-6 col-3">
                <label class="form-label" for="embedding_chunk_overlap">Embedding Chunk Overlap</label>
                <input type="number" class="form-control" id="embedding_chunk_overlap" value="500" min="100" max="4000"
                       name="embedding_chunk_overlap" placeholder="Enter overlap">
              </div>
              <div class="mb-6 col-3">
                <label class="form-label" for="search_instance_retrieval_limit">Search Instance Retrieval Limit</label>
                <input type="number" class="form-control" id="search_instance_retrieval_limit" value="10" min="1"
                       max="50" name="search_instance_retrieval_limit" placeholder="Enter limit">
              </div>
              <div class="mb-6 col-3">
                <label class="form-label" for="maximum_pages_to_index">Maximum Pages to Index</label>
                <input type="number" class="form-control" id="maximum_pages_to_index" value="1000" min="1" max="1000000"
                       name="maximum_pages_to_index" placeholder="Enter max pages">
              </div>
            </div>
            <hr>
            <button type="submit" class="btn btn-primary d-grid w-25 mt-4">
              <strong>
                <i class="fa fa-plus me-2"></i>
                Create Connection
              </strong>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

{% endblock %}
