{% extends layout_path %}

{% load static %}
{% load i18n %}

{% block title %}Blog - Latest Posts{% endblock %}

{% block page_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'vendor/css/pages/front-page-help-center.css' %}"/>
{% endblock page_css %}

{% block content %}

  <div class="alert alert-secondary alert-dismissible d-flex col-lg-12 align-items-center" role="alert">
    <img src="{% static 'img/custom-illustrations-v2/i2-76.png' %}" width="25%" style="border-radius: 25px;"
         class="justify-content-end me-8">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="alert-icon rounded">
        <i class="ti ti-bookmark"></i>
      </span>
    <div class="d-flex flex-column ps-1">
      <h5 class="alert-heading mb-2">Tip</h5>
      <p class="mb-0">
        This is the blog page where you can view all the latest posts about our products, services, and other
        interesting topics. You can read more about each post by clicking on the "Read More" button. Please keep
        in mind that the content of each post is for informational purposes only and should not be considered as
        professional advice. If you have any questions or concerns, please feel free to contact us.
      </p>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
      </button>
    </div>
  </div>

  <!-- Search Bar: Start -->
  <div class="row g-4 mb-4 mt-8 card card-border-shadow-primary p-4">
    <div class="col-xl-12">
      <h5 class="text-muted"><strong>Search Posts</strong></h5>
      <div class="card text-center mb-4">
        <div class="card-header">
          <div class="nav-align-top">
            <form method="get" action=".">
              <div class="input-group mb-3">
                <input type="text" name="search" value="{{ search_query }}" class="form-control"
                       placeholder="Search by title or content">
                <button type="submit" class="btn btn-primary"><strong>Search</strong></button>
                <a href="." class="btn btn-secondary"><strong>Clear</strong></a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Search Bar: End -->

  {% if messages %}
    {% for message in messages %}
      <div
        class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% else %}alert-danger{% endif %}"
        role="alert">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

  <hr>

  <!-- Blog Header: Start -->
  <section class="section-py first-section-pt blog-header position-relative overflow-hidden text-center">
    <i class="ti ti-bookmark text-primary text-center mb-4" style="font-size: 60px;"></i>
    <h3 class="text-center text-primary">
      <strong>Help Center</strong>
    </h3>
    <p class="text-center px-12 mb-0 mx-12 ">
      <i class="ti ti-info-circle me-2"></i>
      Explore our latest articles, tutorials, and insights. Stay informed and up-to-date with our blog posts on a
      variety of different topics such as the development status of our products, new features, and more exciting
      news about our organization and overall industry trends.
    </p>
  </section>
  <!-- Blog Header: End -->

  <hr>

  <!-- Blog List: Start -->
  <section class="section-py mt-12">
    <div class="container">
      <div class="row mb-12">
        <div class="col-lg-10 mx-auto">
          <div class="row g-6">
            {% for post in page_obj %}
              <div class="col-xl-4 col-md-6 d-flex">
                <div class="card border shadow-none">
                  <img class="card-img-top rounded" src="
                    {% if post.thumbnail_image %}{{ post.thumbnail_image.url }}{% else %}{% static 'img/custom-illustrations-v2/i2-1.png' %}{% endif %}"
                       alt="{{ post.title }}">
                  <div class="card-body">
                    <h5 class="my-3"><strong>{{ post.title }}</strong></h5>
                    <p class="mb-3">{{ post.content|safe|truncatechars:150 }}</p>
                    <a class="btn btn-sm btn-label-primary" href="{% url 'blog_app:post_detail' slug=post.slug %}">
                      <strong>Read More</strong></a>
                    <hr>
                    <div class="mt-2">
                      {% for tag in post.tags.all %}
                        <span class="badge bg-primary rounded p-1 m-1">
                          <strong>#{{ tag.name }}</strong>
                        </span>
                      {% endfor %}
                    </div>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>

      <hr>

      <!-- Pagination: Start -->
      <div class="d-flex justify-content-center mt-8">
        <nav aria-label="Page navigation">
          <ul class="pagination">
            {% if page_obj.has_previous %}
              <li class="page-item">
                <a class="page-link" href="?page=1{% if search_query %}&search={{ search_query }}{% endif %}">
                  <span aria-hidden="true">&laquo;&laquo;</span>
                </a>
              </li>
              <li class="page-item">
                <a class="page-link" href="?page=
                  {{ page_obj.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
            {% else %}
              <li class="page-item disabled">
                <span class="page-link">&laquo;&laquo;</span>
              </li>
              <li class="page-item disabled">
                <span class="page-link">&laquo;</span>
              </li>
            {% endif %}

            {% for num in page_obj.paginator.page_range %}
              {% if page_obj.number == num %}
                <li class="page-item active"><span class="page-link">{{ num }}</span></li>
              {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                <li class="page-item"><a class="page-link" href="?page=
                  {{ num }}{% if search_query %}&search={{ search_query }}{% endif %}">{{ num }}</a></li>
              {% endif %}
            {% endfor %}

            {% if page_obj.has_next %}
              <li class="page-item">
                <a class="page-link" href="?page=
                  {{ page_obj.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
              <li class="page-item">
                <a class="page-link" href="?page=
                  {{ page_obj.paginator.num_pages }}{% if search_query %}&search={{ search_query }}{% endif %}">
                  <span aria-hidden="true">&raquo;&raquo;</span>
                </a>
              </li>
            {% else %}
              <li class="page-item disabled">
                <span class="page-link">&raquo;</span>
              </li>
              <li class="page-item disabled">
                <span class="page-link">&raquo;&raquo;</span>
              </li>
            {% endif %}
          </ul>
        </nav>
      </div>
      <!-- Pagination: End -->

    </div>
  </section>
  <!-- Blog List: End -->

{% endblock %}
