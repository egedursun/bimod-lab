{% load static %}
{% load default_application_zoom %}

<!DOCTYPE html>

<html lang="en"
      class="{{ style }}-style {{ navbar_type_class }} {{ header_type_class }} {{ menu_fixed_class }} {{ menu_collapsed_class }} {{ footer_fixed_class }} {{ display_customizer_class }} {{ content_layout_class }}"
      dir="{{ text_direction_value }}" data-theme="{{ theme }}" data-assets-path="{% static '/' %}"
      data-base-url="{{ url }}" data-framework="django"
      data-template="{{ menu_horizontal|yesno:'horizontal,vertical' }}-menu-{{ is_front|yesno:'front,' }}-{{ theme }}-{{ style }}">
<head>
  <title>{% block title %}{% endblock title %} | {% get_theme_variables 'template_name' %}
    - {% get_theme_variables 'template_suffix' %}</title>
  <meta charset="utf-8"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
  <meta name="og:description" content="{% get_theme_variables 'template_description' %}"/>
  <meta name="og:image" content="{% static 'img/custom-illustrations/boy-red-1.png' %}"/>
  <meta name="og:url" content="{% url 'landing:index' %}"/>
  <meta property="og:type" content="website"/>
  <meta name="keywords" content="{% get_theme_variables 'template_keyword' %}"/>
  <!-- Canonical SEO -->
  <link rel="canonical" href="{% get_theme_variables 'product_page' %}">
  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="{% static 'img/favicon/favicon.ico' %}"/>

  <!-- Include the styles partial -->
  {% include is_front|yesno:"./partials/styles_front.html,./partials/styles.html" %}

  {% block vendor_css %}{% endblock vendor_css %}

  <!--Page CSS-->
  {% block page_css %}{% endblock page_css %}


  <!-- Include the scripts partial (required ) -->
  {% include is_front|yesno:"./partials/scripts_includes_front.html,./partials/scripts_includes.html" %}

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2157MB1H4E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'G-2157MB1H4E');
  </script>

  <script>
    window.onload = function () {

      document.body.style.zoom = "{% default_application_zoom %}";
      console.log("Zoom level set to {% default_application_zoom %}");

      const tipsSections = document.querySelectorAll('.tips-section'); // Select all elements with the class 'tips-section'
      const tipsSwitch = document.querySelector('.switch-input');

      if (!tipsSections.length || !tipsSwitch) {
        console.error('Tips sections or switch not found');
        return;
      }

      // Retrieve the current state of the tips from localStorage
      const tipsState = localStorage.getItem('show_tips');

      // Apply the correct class based on the stored state to all tips sections
      tipsSections.forEach(tipsSection => {
        if (tipsState === 'true' || tipsState === null) {
          tipsSection.classList.remove('d-none');
        } else {
          tipsSection.classList.add('d-none');
        }
      });

      // Listen for changes on the switch button
      tipsSwitch.addEventListener('change', function () {
        const isOn = tipsSwitch.checked;
        localStorage.setItem('show_tips', isOn);

        tipsSections.forEach(tipsSection => {
          if (isOn) {
            tipsSection.classList.remove('d-none');
          } else {
            tipsSection.classList.add('d-none');
          }
        });
      });
    };
  </script>

</head>

<body>

<!-- create a bar at the top of the screen, rectangular -->
<div class="bg-label-danger border border-2 border-danger d-flex justify-content-center align-items-center"
     id="environment"
     style="width: 100%; height: 20px; position:fixed; bottom:0; left:0; z-index: 9999999999999999999999; border-top-left-radius: 10px; border-top-right-radius: 10px;">
  <p class="m-0">
    <strong class="me-6">
      <i class="fa fa-exclamation-triangle me-4"></i>
      ENVIRONMENT: </strong><strong id="environmentValue" class="text-success">
  </strong></p>
</div>

<!-- beautify ignore:end -->

{% block layout %}
{% endblock layout %}

{% include is_front|yesno:"./partials/scripts_front.html,./partials/scripts.html" %}

<!--Vendors Javascript-->
{% block vendor_js %} {% endblock vendor_js %}

<!--Page Javascript-->
{% block page_js %}
  <script>
    // when the DOM is ready
    document.addEventListener('DOMContentLoaded', function () {
      // check the "dev." URL from the current URL of the page
      const url = window.location.href;
      // strip the https or http from the URL
      const strippedUrl = url.replace(/(^\w+:|^)\/\//, '');
      console.log(strippedUrl);
      let environment = 'prod';
      // check if the URL starts with "dev."
      if (strippedUrl.startsWith('dev.')) {
        environment = 'dev';
      } else if (strippedUrl.startsWith('localhost') || strippedUrl.startsWith('0.0.0.0') | strippedUrl.startsWith('127.0.0.1')) {
        environment = 'local';
      } else {
        environment = 'prod';
      }
      console.log(environment);
      // get the environment value element
      const environmentValueElement = document.getElementById('environmentValue');
      // set the environment value to the environment value element
      if (environment === 'local') {
        environmentValueElement.innerText = ' Local Development Instance [localhost:8000] ';
      } else if (environment === 'dev') {
        environmentValueElement.innerText = ' Development Server Instance [dev.bimod.io] ';
      } else {
        // hide the environment bar if the environment is production
        document.getElementById('environment').classList.add('d-none');
      }
    });
  </script>
{% endblock page_js %}

</body>

</html>
